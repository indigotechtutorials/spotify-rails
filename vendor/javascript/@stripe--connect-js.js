/* eslint-disable @typescript-eslint/no-empty-function */
/* eslint-disable @typescript-eslint/no-unused-vars */
const e={"account-onboarding":{setFullTermsOfServiceUrl:e=>{},setRecipientTermsOfServiceUrl:e=>{},setPrivacyPolicyUrl:e=>{},setSkipTermsOfServiceCollection:e=>{},setCollectionOptions:e=>{},setOnExit:e=>{}},"account-management":{setCollectionOptions:e=>{}},"notification-banner":{setCollectionOptions:e=>{},setOnNotificationsChange:e=>{}},"payment-details":{setPayment:e=>{},setOnClose:e=>{}}};const t={"account-onboarding":"stripe-connect-account-onboarding",payments:"stripe-connect-payments","payment-details":"stripe-connect-payment-details",payouts:"stripe-connect-payouts","payouts-list":"stripe-connect-payouts-list",balances:"stripe-connect-balances","account-management":"stripe-connect-account-management","notification-banner":"stripe-connect-notification-banner",documents:"stripe-connect-documents","tax-registrations":"stripe-connect-tax-registrations","tax-settings":"stripe-connect-tax-settings"};const n="loadConnect was called but an existing Connect.js script already exists in the document; existing script parameters will be used";const o="https://connect-js.stripe.com/v0.1/connect.js";const s="https://connect-js.stripe.com/v1.0/connect.js";const findScript=()=>document.querySelectorAll(`script[src="${s}"]`)[0]||document.querySelectorAll(`script[src="${o}"]`)[0]||null;const injectScript=()=>{const e=document.createElement("script");e.src=s;const t=document.head;if(!t)throw new Error("Expected document.head not to be null. Connect.js requires a <head> element.");document.head.appendChild(e);return e};let c=null;const loadScript=()=>{if(c!==null)return c;c=new Promise(((e,t)=>{if(typeof window!=="undefined"){window.StripeConnect&&console.warn(n);if(window.StripeConnect){const t=createWrapper(window.StripeConnect);e(t)}else try{let o=findScript();o?console.warn(n):o||(o=injectScript());o.addEventListener("load",(()=>{if(window.StripeConnect){const t=createWrapper(window.StripeConnect);e(t)}else t(new Error("Connect.js did not load the necessary objects"))}));o.addEventListener("error",(()=>{t(new Error("Failed to load Connect.js"))}))}catch(e){t(e)}}else t("ConnectJS won't load when rendering code in the server - it can only be loaded on a browser. This error is expected when loading ConnectJS in SSR environments, like NextJS. It will have no impact in the UI, however if you wish to avoid it, you can switch to the `pure` version of the connect.js loader: https://github.com/stripe/connect-js#importing-loadconnect-without-side-effects.")}));return c};const hasCustomMethod=t=>t in e;const initStripeConnect=(n,o)=>{var s;const c=(()=>{try{return o.fetchClientSecret()}catch(e){return Promise.reject(e)}})();const i=(s=o.metaOptions)!==null&&s!==void 0?s:{};const r=n.then((e=>e.initialize(Object.assign(Object.assign({},o),{metaOptions:Object.assign(Object.assign({},i),{eagerClientSecretPromise:c})}))));return{create:n=>{let o=t[n];o||(o=n);const s=document.createElement(o);if(hasCustomMethod(n)){const t=e[n];for(const e in t)s[e]=function(t){r.then((()=>{this[`${e}InternalOnly`](t)}))}}r.then((e=>{if(!s.isConnected&&!s.setConnector){const e=s.style.display;s.style.display="none";document.body.appendChild(s);document.body.removeChild(s);s.style.display=e}if(!s||!s.setConnector)throw new Error(`Element ${n} was not transformed into a custom element. Are you using a documented component? See https://docs.stripe.com/connect/supported-embedded-components for a list of supported components`);s.setConnector(e.connect)}));return s},update:e=>{r.then((t=>{t.update(e)}))},debugInstance:()=>r,logout:()=>r.then((e=>e.logout()))}};const createWrapper=e=>{window.StripeConnect=window.StripeConnect||{};window.StripeConnect.optimizedLoading=true;const t={initialize:t=>{var n;const o=(n=t.metaOptions)!==null&&n!==void 0?n:{};const s=e.init(Object.assign(Object.assign({},t),{metaOptions:Object.assign(Object.assign({},o),{sdk:true,sdkOptions:{sdkVersion:"3.3.11"}})}));return s}};return t};const i=Promise.resolve().then((()=>loadScript()));let r=false;i.catch((e=>{r||console.warn(e)}));const loadConnectAndInitialize=e=>{r=true;return initStripeConnect(i,e)};export{loadConnectAndInitialize};

